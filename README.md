# Tor Portable

Универсальная утилита для повседневного обхода цензуры (оптимизировалась под Ютуб и Дискорд) и совместного использования с PAC Антизапрет. Одобрено автором расширения Обход блокировок рунета.
Возможно, единственное в мире средство, инициализирующее сразу три метода обхода блокировок (резистентная сеть PAC прокси серверов, VPN и DPI обход по UDP) для одновременного использования.
В наличии exe с тихим запуском, лёгкая установка и удаление службы, новейший (2024 год) протокол противодействия цензуре, полное раздельное туннелирование и многое другое, полностью бесплатно.

Без внимательного чтения инструкции у вас НАСТРОИТЬ НИЧЕГО НЕ ПОЛУЧИТСЯ!

Read the English instructions below.

Support us:

5536 9141 8416 7645 — Verity Freedom (портативный Tor)

4377 7237 7311 4255 — ilyaigpetrov (расширение Runet censorship bypass)

***https://antizapret.prostovpn.org/donate.html — ValdikSS (прокси Antizapret, ВАЖНО в ноябре и декабре каждого года)***

Разработано при поддержке сообщества (в особенности отмечу помощь от DesuIsALie и bananakid).
Основной автор портативного Тора — Verity Freedom.
Автор прокси Антизапрет — ValdikSS.
Автор расширения Обход блокировок рунета — ilyaigpetrov.
Tor Expert Bundle от Tor Project.
SwitchyOmega от FelisCatus, ZeroOmega от zero-top.
Discord-drover от hdrover.

# Инструкция

Обратите повышенное внимание, для какой версии Windows вы ставите программу, ибо ранее несколько человек запутались в этом (слава нашим героям, без их вмешательства в жизни бы не добавил это уточнение). Скачиваем архив из [релизов](https://github.com/Verity-Freedom/Tor-Portable/releases), распаковываем и заходим в полученную папку. Тор запускается через AntiTor.exe, моментально сворачиваясь, что делает его совместимым с автозагрузкой shell:startup и закреплением в панель задач. Чтобы убрать окно Тора, но сохранить его работоспособность, вы можете создать/удалить службу через service-manager.cmd. Тор НЕНАВИДИТ специальные символы по типу скобочек, они могут помешать ему запуститься; при этом при запуске в папке с кириллицей проблем не будет. Откройте drover, запустите файл drover.exe и нажмите install. Это разблокирует клиентское приложение Дискорда вместе с голосовыми чатами без всяких задержек благодаря обходу UDP, но Тор должен работать или службой, или быть запущен.

![0](https://github.com/user-attachments/assets/66a0b920-b238-44e6-85d4-cbd7066224a8)

Нам необходимо поставить расширения. Начнём с Обхода блокировок рунета ([Chrome](https://chromewebstore.google.com/detail/обход-блокировок-рунета/npgcnondjocldhldegnakemclmfkngch), [Firefox](https://addons.mozilla.org/ru/firefox/addon/обход-блокировок-рунета/)) — используем его как чекер, будет выводить нам домёны страницы при наведении на него мышкой, которые затем можно ввести в проксируемые Тором исключения. Это нужно в первую очередь мне как разработчику, остальные могут пропустить этот шаг, основной функционал не изменится.

![1](https://github.com/user-attachments/assets/a05efc20-db01-4289-9920-d955b369fd35)

![2](https://github.com/user-attachments/assets/ae883374-a7fc-4b1e-b331-ec668e87cf13)

Поставили его и сразу отключили. Даже отключённым он сможет исполнять свою единственную нужную нам функцию. Обязательно закрепите и его, и Омегу (следующий абзац) в панель расширений. Чекер будет работать корректно только в режиме TOR Омеги, пока его у вас нет. Если чекер внезапно перестал работать, я ПОЛНОСТЬЮ отключаю его (не как пункт в меню, а как расширение для браузера) и включаю вновь.

Дальше нам необходимо поставить расширение ZeroOmega ([Chrome](https://chromewebstore.google.com/detail/proxy-switchyomega-3-zero/pfnededegaaopdmhkdmcofjmoldfiped), [Firefox](https://addons.mozilla.org/en-US/firefox/addon/zeroomega/)), для его корректной работы Тор должен быть запущен. Расширение имеет manifest v3 и не будет работать в очень старых браузерах, в таком случае рекомендую обновиться, ибо с постоянным прирастанием нового функционала совет остаться на старой версии теряет всякий смысл.

Опционально, но рекомендуется поставить лучший, народный адблок — uBlock Origin ([Chrome](https://chromewebstore.google.com/detail/ublock-origin/cjpalhdlnbpafiamejdnhcphjbkeiagm), [Firefox](https://addons.mozilla.org/ru/firefox/addon/ublock-origin/)), чтобы вас не беспокоила реклама разблокированного без всяких региональных ограничений Ютуба. Его уважают и разработчики, и простые пользователи, как самый лучший блокировщик рекламы.

Для Омеги вам необходимо синхронизировать все настройки с моими, чтобы не настраивать их вручную. Это поставит вам и всё необходимое, и красивую тему (нескучные обои!) xcode-dusk. Тема изменится после обновления вкладки. Используйте ссылку <pre>https://raw.githubusercontent.com/Verity-Freedom/Tor-Portable/refs/heads/main/ZeroOmegaOptions.bak</pre> для мгновенной синхронизации, куда именно нужно вставить её показано на изображении.

![3](https://github.com/user-attachments/assets/f8854f37-bc4d-4b26-acab-71b2733b9e45)

Если у вас уже были поставлены свои сайты в исключения в режиме AUTO, перед синхронизацией скопируйте их заранее, потом сможете легко вернуть их через редактирование исходного кода (edit source code). Желательно добавлять *. при внесении любых новых домёнов в AUTO, чтобы они автоматически захватывали поддомёны.

Режимы вы можете переключать нажатием кнопки мыши по расширению, вам стоит сделать это сразу после синхронизации для начала работы. Режимов три — system, AUTO и TOR. System используется для совместимости со сторонними VPN, полностью отключая проксирование. Выглядит как чёрный кружок с белым центром. Режим AUTO — фиолетовый круг с чёрным центром, вам необходимо рассматривать как основной для работы расширения. По умолчанию он использует устойчивую сеть PAC прокси-серверов Антизапрет для полного раздельного туннелирования только заблокированных сайтов, используя Тор по отношению к редактируемому списку, однако при замене на Антицензорити возможно задать собственный сервер по тому же принципу раздельного туннелирования. Антизапрет работает только для россиян, так как содержит список сайтов, заблокированных в России.

![4](https://github.com/user-attachments/assets/192dcce1-8e7e-4d48-92e3-d930f4254fa8)

Единственным средством обхода блокировок, которое может работать параллельно с Тором и совместимо с ним в режиме AUTO, является Zapret, при желании вы можете установить его самостоятельно (например Zapret разблокировывает Дискорд и способен восстановить Ютуб на российском ip, не требуя блокировщика рекламы, однако он может не вовремя сломаться, не снимает региональные ограничения и является сторонней независимой от Тора разработкой; тем не менее в некоторых ситуациях подобное совместное использование может быть довольно удобным и он многократно обновлялся). В режиме TOR мы можем снимать блокировки со всяких спотифаев и чатжпт ценой отключения доступа к российским сайтам по типу госуслуг и некоторых других, которые блокируют Тор на стороне. Это режим проксирования всего браузерного трафика, благодаря нему работает чекер, выглядит как фиолетовый круг с белым центром.

В TOR возможно измерить скорость подключения, желательно использовать для этого speedcheck.org. Вашей скорости должно с запасом хватать на 1080 60, на 2К 60, и даже на 4К 60 при смене выхода на менее перегруженный через change-mode/pro.

Вы можете проявить креативный подход, поменяв тему расширения и цвета режимов, однако в случае с последними я не гарантирую, что у вас получится однозначно трактовать их и отличать друг от друга. Слишком большое разнообразие используемых цветов может привести к тому, что расширение будет выглядеть неодинаково находясь в одном и том же режиме, что я посчитал неоптимальным. Для переключения между режимами используется quick switch, вы можете отключить его в любой момент, кликнув правой кнопкой мыши по расширению.

![5](https://github.com/user-attachments/assets/122299fc-d61a-487d-9976-839961c80530)

Лог работы программы содержится по адресу tor\notice.log, также именно этот лог выдаётся вам в командной строке. Можете писать мне в [Новости и фидбэк](https://github.com/Verity-Freedom/Tor-Portable/issues/8) на любую тему.

## Режимы работы
Как я уже написал выше, у Тора есть режимы default и pro. В режиме default выходной ip подбирается случайно, а самим Тором используется 10 мостов одновременно. Это значительно минимизирует шанс отказа какой-либо части системы, а Тор состоит из трёх частей: мосты, миддлы (они справляются с задачей и работают без перерыва больше года, а потому не рандомятся), и выходы. В режиме Tor выходной ip задан заранее, по принципу, что он является достаточно быстрым и обходит блокировки Ютуба на Тор, хотя эти две задачи в целом несколько противоречат друг другу, ибо блокировки Ютуба на Тор действуют на наиболее популярные, а значит наиболее быстрые выходы, но кое-как этот баланс у меня соблюсти в очередной раз получилось, и то скоростью всё равно приходится жертвовать, ибо Тор в идеале должен выжимать 45 мегабит, и если в про у вас 45 мегабит не будет, не обессудьте. Большой проблемой Тора является тот факт, что все его выходы принципиально открыты для чужих глаз, рабочих из них менее двух тысяч. Чтобы сменить режим работы с default на pro зайдите в архив и замените свой torrc. Отдельной шуткой является тот факт, что помимо блокировок для Тора, для россиян, у Ютуба есть и блокировки на vpn, которые крайне редко, но можно спровоцировать, примером является это аномальное видео, которое лучше всего смотреть с Запретом. Вопрос, зачем вообще бороться с блокировкой такой соцсети, которая и так отлично справляется с блокировкой самой себя, пусть останется риторическим.
![image](https://github.com/user-attachments/assets/61b86c3e-d940-4715-afa4-592d7964eca0)
Вторым режимом работы для профессионала является Антицензорити, который я модифицировал специально под этот проект. Основным разблокировщиком сайтов в Торе является Антизапрет — скрипт, который в очень сжатом виде хранит огромное количество заблокированных сайтов в России, с защищёнными от цензуры внешними серверами, **которые требуют постоянной оплаты от своего создателя**, ко всем остальным сайтам идёт доступ напрямую. Антизапрет — это невероятное чудо инженерной мысли, старейшая прокси-сеть в России, существующая с 2013 года, и одна из самых больших в мире (через Обход блокировок рунета на нём сидит около миллиона человек). Тор же имеет фундаментальный недостаток — так как все его выходы открыты, он много где заблокирован, и при проксировании на весь трафик просто **неюзабелен**. Создатель Антизапрета, ValdikSS, также модифицировал один из самых популярных бесплатных впн своего времени — Psiphon, который до сих пор служит верой и правдой обходя блокировки, и породил его усиленную версию — Psiphon TM, для борьбы с цензурой в Туркменистане. Она медленнее чем оригинал (и я советую вам также иметь при себе оригинал на случай, если больше падать он не будет, в последний раз РКН его убил в середине 2024 года), но лучше защищена от блокировок и совместима с Антицензорити, который я переделал специально для этих целей.

Антицензорити можно использовать как локальную версию Антизапрета, его скорость позволяет без прогрузок проигрывать любые видео на 1080 30 fps, и из-за отсутствия политики открытых выходов как ВПН он почти нигде не заблокирован. Для использования вам необходимо в настройках AUTO поменять дефолтный режим на Антицензорити, убедиться, что он успешно загружен (я не уверен что скрипт загрузится автоматически если не зайти в него, но может и так), скачать [Psiphon TM](https://github.com/Verity-Freedom/Tor-Portable/releases/tag/v1.0) и запустить runme.cmd — он запускается и сразу сворачивается, подобно Тору. Также войдя в ZeroOmega в режим Psiphon TM вы можете прорвать блокировку на такие сайты, которые блокируют Тор, и при этом не попали в список Антизапрета и Антицензорити, но если вы захотите в него зайти, вам придётся сделать это вручную, также учитывайте, что его скорость существенно ниже комфорта (за комфорт я полагаю 2К60 без прогрузок). Также напоминаю, что оригинальный Psiphon невероятно хорош сам по себе, и если он для вас до сих пор работает, стоит попробовать использовать его. Удачи.

# Разблокировываем ВЕСЬ ИНТЕРНЕТ играючи!

1) Самое простое задание — доступ к даркнету, если вы всё сделали правильно. Перейдите на http://flibustaongezhld6dibs2dps6vm4nvqg2kp7vgowbu76tzopgnhazqd.onion/ и у вас откроется onion версия Флибусты. Даркнет теперь будет всегда рядом.
2) Мы разблокировали доступ к статьям о VPN на habr.com — перейдите по https://habr.com/ru/articles/849092/, в ином случае эта статья бы не открылась. Можете перейти в режим system proxy, чтобы подметить разницу, для чего нужно перезагрузить страницу.
3) Пример геозаблокированного видео на Ютуб — https://www.youtube.com/watch?v=-kcOpyM9cBg. Без Тора к нему доступа не будет даже через Запрет, способный разблокировать Ютуб в целом.
4) gosuslugi.ru откроются только в режиме AUTO и system.
5) Клиентский Discord запустится только если у вас был установлен drover. В браузере он запустится только в режиме TOR без голосовых чатов. Для разблокировки Дискорда в режимах AUTO и system в браузере вместе с голосовым чатом может понадобиться установка Запрета.
6) <rawtext>*</rawtext> Первое задание повышенной сложности — доступ на сайт pixiv.net у вас будет только в режиме AUTO. Насколько мне известно, только в режиме AUTO также прогружаются аватарки на chess.com. Pixiv.net может убивать к себе доступ из режима AUTO при помощи монструозных капч, в случае, если вы столкнулись с этим, это довольно печально и несколько усложняет задание. К счастью, это обходится заходом на более конкретный адрес по сравнению с pixiv.net и pixiv.net/en, например сразу нужный вам арт.
7) <rawtext>*</rawtext> Сайт chatgpt.com откроется, напротив, только в режиме TOR.
8) <rawtext>*</rawtext> Очередное задание для вас — проиграть данное видео https://www.youtube.com/watch?v=LXb3EKWsInQ в 4К без единой прогрузки. Вероятно, чтобы выполнить это задание, вам потребуется использовать качественный IP из change-mode/pro.rar/torrc.txt, однако вам может повезти и у вас получится проиграть данное видео без дополнительных модификаций. Вам стоит измерить скорость на speedcheck.org и убедиться, что ваша средняя скорость превышает 30 mb/s, чтобы заранее понять, есть ли у вас шансы.
9) ~~** Самое сложное задание — доступ к hdrezka.ag. По дефолту хдрезке не нравится используемый хорватский диапазон, ибо Тор использует одновременно несколько ip для доступа к ней. Однако у Антизапрета не хватает скорости для комфортного проксирования хдрезки в фуллхд, поэтому она проксируется Тором в обоих режимах. При этом основной используемый скоростной ip хдрезке тоже не подойдёт, ибо у неё есть геоблокировка как на Германию, так и на Люксембург. Чтобы комфортно смотреть хдрезку, возьмите ip, начинающийся на 45., из ExitNodesList в torrc.txt, и замените им используемый вами ExitNodes. Простое убирание хдрезки из проксирования Тором чтобы она начала проксироваться Антизапретом на никакой скорости в качестве выполнения задания засчитано не будет.~~ 23.12.2024 защита hdrezka.ag была проанализирована и взломана, теперь открываться успешно она будет у кого угодно.
10) ** Ютуб часто блочит видео только для Тора, хотя, конечно, таких от общей массы немного. Известными видео, которые блокирует Тор, являются: https://www.youtube.com/watch?v=W9lsWI7zhTY, https://www.youtube.com/watch?v=O_ItSLCZWb0, https://www.youtube.com/watch?v=OqPl4QrczTk (данное видео заблокировано и для Тора, и для россиян). И если в случае с тестом 4К у меня есть хотя бы надежда, что у вас получится проиграть видео без запинок не меняя exit node, то здесь у меня такой надежды нет, и вам обязательно нужно изменить режим на change-mode/pro. При этом в режиме pro Тор не будет регенерировать IP, так что в момент, когда он умрёт, ваш Тор просто застынет на 45%, и вам будет необходимо найти нужный IP самостоятельно.

После выполнения всех заданий вы можете знать, что овладели Тором в совершенстве.

На некоторых сайтах по типу polymarket.com могут быть сложности с регистрацией даже в режиме TOR, так как у него много защит, а у Тора очень грязные ip. Лично я использую доставшийся бесплатно VLESS на Некорэе для доступа к polymarket.com и не знаю, возможен ли доступ к нему через какой-либо обскурный торовский ip. Поэтому задания по регистрации на polymarket.com через Тор нет, и я считаю его невозможным, как какую-нибудь теорему Ферма. Возможно умельцы когда-нибудь и справятся, но я сильно сомневаюсь. Важно знать, что даже Тор не всесилен, хотя обеспечивает свободный доступ к 99% интернета.

Для проксирования отдельных приложений Тором некоторые используют инструменты по типу [proxifyre](https://github.com/wiresock/proxifyre).

# English instructions

Developed with the support of the community (especially the help from DesuIsALie and bananakid). The main author of the portable Tor is Verity Freedom. Tor Expert Bundle from Tor Project.
SwitchyOmega from FelisCatus, ZeroOmega from zero-top. Runet Censorship Bypass from ilyaigpetrov. Discord-drover from hdrover.

Run the program via AntiTor.exe, let it work in the background. Preferably put a label leading to AntiTor.exe to startup (startup is called by the shell:startup command in the win+r menu), it also can be pinned to the taskbar.
To proxy browser traffic through Tor use ZeroOmega extension, read more about it in readme-visual. Previously, an older SwitchyOmega extension was used, but it's obsolete now. SwitchyOmega recommended only for old browsers.
In Russia we also use Runet Censorship Bypass extension, but only to know more about proxified domains, so anyone can use it this way too.
Switch between modes using the mouse button: TOR (everything is proxified), AUTO (only some sites are proxified), system (nothing is proxified, you can use a third-party VPN). PAC Antizapret only for Russians.
We are using Drover to proxify Discord through Tor and bypass UDP block.

Bridges use four completely different connection types: obfs4, snowflake, conjure and webtunnel (default, it is optimal to use only it because of the greater stability).
Replace the bridges by editing the torrc file, receive new ones via a bridge request in the tor browser or send an empty email to bridges@torproject.org.
The new webtunnel bridge can be obtained at https://bridges.torproject.org/bridges/?transport=webtunnel and https://github.com/scriptzteam/Tor-Bridges-Collector/blob/main/bridges-webtunnel, there is also a large list of webtunnel bridges inside.
Bridges may disappear gradually, as the program informs you that one of the bridges has failed, which negatively affects the quality of the connection and can lead to its complete breakdown.
I recommend reading torrc.txt, because in addition to the code for the correct operation of the program, it contains many important technical details and even has settings to increase speed (language English).

Use the service-manager file if you want to install or uninstall Tor as service.

Ready!
